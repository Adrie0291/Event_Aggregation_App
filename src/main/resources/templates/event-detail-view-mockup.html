<!DOCTYPE html>
<html lang="en" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <!-- Favicon-->
    <link href="/assets/favicon.ico" rel="icon" type="image/x-icon"/>
    <!-- custom css-->
    <link href="/css/custom_mockup.css" rel="stylesheet"/>
    <!-- <link href="/css/index.css" rel="stylesheet"/>-->
    <!-- Core theme CSS (includes Bootstrap)-->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" rel="stylesheet">
    <title>Detail event view</title>
</head>
<body>
<!-- HERE GOES CONTENT-->

<div class="bg-dark">
    <!-- text placement-->
    <div class="event-content">

        <section class="column">
            <p class="header" th:text="${event.title}"></p>
            <!--     sign up user -->

            <div>
                <div th:if="!${#sets.contains(event.usersNicknames, loggedUser.username)}">
                    <!--            th:if="!${event.usersNicknames.contains(__${loggedUser.username}__)}"-->

                    <form method="post" th:action="@{/detail-view/__${event.id}__/signup-for-event}">
                        <div>
                            <input type="submit" value="Sign up for Event">
                        </div>
                    </form>

                </div>
            <!--  sign out user  -->

            <div>
                <div th:if="${#sets.contains(event.usersNicknames, loggedUser.username)}">
                    <!--            th:if="${event.usersNicknames.contains(__${loggedUser.username}__)}" -->

                    <form method="post" th:action="@{/detail-view/__${event.id}__/sign-out-from-event}">
                        <div>
                            <input type="submit" value="Sign out from Event">
                        </div>
                    </form>
                </div>
            <hr>
            <h4 th:text="${#strings.concat(event.startingDateTime, ' - ', event.endingDateTime)}"></h4>
            <article>
                <p th:text="${event.description}"></p>
            </article>
        </section>
        <section class="columnImage" th:object="${event.image}">
            <img alt="event-image" th:src="@{${'/images/' + event.image.filename}}">
        </section>

    </div>

    <hr class="section-divider">

    <div class="lowerContent">
        <section class="column">
            <form class="nav-item d-flex"
                  method="post"
                  role="search"
                  th:action="@{/detail-view/__${event.id}__}" th:object="${comment}">
                <div class="input-group">
                    <input aria-describedby="basic-addon1"
                           aria-label="Add comment"
                           autofocus
                           class="form-control"
                           id="title"
                           name="title"
                           placeholder="Add comment..."
                           th:field="*{text}"
                           type="text">

                    <!-- Search button -->
                    <button class="btn btn-primary input-group-append"
                            type="submit">
                        Add comment
                    </button>
                </div>
            </form>
            <div class="commentList">

                <tr th:each="c : ${comments}">

                    <div class="comment">
                        <td th:text="${c.userNickname} + ' wrote: '"></td>
                        <td th:text="${c.text}"></td>
                        <div class="commentDate">
                            <td th:text="${c.writingDate}"></td>
                        </div>
                    </div>

                </tr>

            </div>
        </section>

        <section class="column">
            <div>
                <table class="table table-striped attendingList">
                    <thead>
                    <tr>
                        <th>Attending Users</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!--                    <tr th:each="userNickname : ${event.usersNicknames}">-->
                    <!--                        <td th:text="${userNickname}"></td>-->

                    <!--                    </tr>-->
                    </tbody>
                </table>
            </div>
        </section>
    </div>


</div>


<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Bootstrap-->
<script crossorigin="anonymous"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
</body>
</html>